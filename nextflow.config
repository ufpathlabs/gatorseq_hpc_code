params 
	{

    Ref_Data_Dir="/ufrc/chamala/share/GatorSeq_Resources/test/GatorSeq_Resources"

	human_ref_bwa= "$Ref_Data_Dir/ucsc_hg19/ucsc_hg19_without_halotypes_CRLF2_100bp_padded_chrY_masked_bwa_index/ucsc_hg19_without_halotypes_CRLF2_100bp_padded_chrY_masked_bwa"
	human_ref_fasta="$Ref_Data_Dir/ucsc_hg19/ucsc_hg19_without_halotypes_CRLF2_100bp_padded_chrY_masked.fasta"


    FASTQ_ROOT_DIR = '/ufrc/chamala/path-svc-mol/GatorSeq/GatorSeq_Fastq'
    HPC_ANALYSIS_FOLDER = 'GatorSeq_Analysis'
    PADDING_SIZE = '250'
    TARGET_BED_FILE = "$baseDir/GatorseqV2_117_GenePanel_Translocation_MSI_SampleID_AIMs_Gender_probes.bed"
    MERGED_TARGET_BED_FILE = "$baseDir/GatorseqV2_117_GenePanel_Translocation_MSI_SampleID_AIMs_Gender_probes_merged.bed"
    PADDED_TARGET_BED_FILE = "$baseDir/GatorseqV2_117_GenePanel_Translocation_MSI_SampleID_AIMs_Gender_Targets_250bp_padded.bed"
    GSBW_VERSION = "1.3"

	rm_temp_files = 1
	bed_split_len = 20
	
	
	bwa_map_sort{
		log = ".bwa_map_sort.bam.log"
		threads = 8
		memory="8G"
        temp_dir="temp_dir"
	}


	merging{
		log="merge_mark_dup.log"
		threads = 8
		merge_bam= "merged.bam"
		dedup_bam = "${params.SAMPLE_NAME}.bam"
		dedup_bam_bai = "${params.SAMPLE_NAME}.bam.bai"
	}
	
	vardict{
		log="vardict_variant_call.log"
		threads = 8
        vardict_vcf_file= "variant.vcf"
        bgzip_vardict_vcf_file= "variant.vcf.gz"
		vcf_file = "${params.SAMPLE_NAME}.vcf"
	    AF_THR = 0.01
	}

	generate_metrics_file {
        METRICS_SCRIPT="$baseDir/metrics.sh"
		buffer_size="3072"
		sample_id= "${params.SAMPLE_NAME}" 
        sample_name= "${params.SAMPLE_NAME}" 
        run_folder= "${params.RUN_NAME}" 
		log=sample_name +".metrics.log"
        total_bamutils_out= sample_name+ ".bamutil_stats_total.metrics.tmp.txt"
        target_bamutils_out= sample_name + ".bamutil_stats_target.metrics.tmp.txt"
        paddedtarget_bamutils_out= sample_name + ".bamutil_stats_paddedtarget.metrics.tmp.txt"
        coverage_out_merged_target_bed_file= sample_name+ ".bedtools_coverage_out_merged_target_bed_file.metrics.tmp.txt"
        coverage_out_probe_target_bed_file= sample_name + ".bedtools_coverage_out_probe_target_bed_file.metrics.tmp.txt"
        mean_stdev_coverage_out_probe_target_bed_file= sample_name + ".bedtools_mean_stdev_coverage_out_probe_target_bed_file.metrics.tmp.txt"
        bamtools_stats_out= sample_name + ".bamtools_stats_out.metrics.tmp.txt"
        rtgtools_stats_out= sample_name + ".rtgtools_stats_out.metrics.tmp.txt"
        sort_order_chr_names= sample_name + ".sort_order_chr_names.metrics.tmp.txt"
        resort_merged_target_bed_file= sample_name + ".resort_merged_target_bed_file.metrics.tmp.bed"
        resort_probe_target_bed_file= sample_name + ".resort_probe_target_bed_file.metrics.tmp.bed" 
        temp_metrics_file= sample_name + ".metrics.tmp.txt"
		metrics_file = sample_name + '.summary.csv' 
		coverage_file = sample_name + '.coverage.csv'
	}
	
	merge_log_benchmark_files{
        sample_name= "${params.SAMPLE_NAME}" 
		final_logs = sample_name +".completes_logs.txt"
		final_benchmark = sample_name +".completes_benchmark.txt"
	}
		
	}


process {
 $bwa_map_sort 
    {
		executor='slurm'
		module = 'bwa/0.7.15:sambamba/0.6.6'   
		clusterOptions = "--account=chamala --qos=chamala --time=120:15:00 --mem-per-cpu=3gb --cpus-per-task=8  --ntasks=1 --nodes=1"
 
   }
 $merging
    {
        executor='slurm'
        module = 'sambamba/0.6.3'
        clusterOptions = "--account=chamala --qos=chamala --time=120:15:00 --mem-per-cpu=3gb --cpus-per-task=8  --ntasks=1 --nodes=1"

   }

 $vardict
    {
        executor='slurm'
        module = 'sambamba/0.6.3'
        clusterOptions = "--account=chamala --qos=chamala --time=120:15:00 --mem-per-cpu=3gb --cpus-per-task=8  --ntasks=1 --nodes=1"

   }
   
  $generate_metrics_file
    {
        executor='slurm'
        module = 'bamutil/1.0.2:datamash/1.1.0:sambamba/0.6.3:gcc/5.2.0:bedtools/2.26.0:bamtools/2.1.1:rtgtools/3.7.1'
        clusterOptions = "--account=chamala --qos=chamala --time=120:15:00 --mem-per-cpu=3gb --cpus-per-task=8  --ntasks=1 --nodes=1"

   }
   
     $merge_log_benchmark_files
    {
        executor='slurm'
        module = 'bamutil/1.0.2:datamash/1.1.0:sambamba/0.6.3:gcc/5.2.0:bedtools/2.26.0:bamtools/2.1.1:rtgtools/3.7.1'
        clusterOptions = "--account=chamala --qos=chamala --time=120:15:00 --mem-per-cpu=3gb --cpus-per-task=8  --ntasks=1 --nodes=1"

   }
}

